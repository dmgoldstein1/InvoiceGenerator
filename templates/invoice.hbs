<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invoice {{invoice_details.invoice_number}}</title>
    <style>
        /* Generated by GitHub Copilot (GPT-4o) - Professional Invoice Styling */
        
        @page {
            margin: 0.5in;
            size: letter;
        }
        
        body {
            font-family: 'Helvetica', 'Arial', sans-serif;
            font-size: 10pt;
            line-height: 1.3;
            color: #333;
            margin: 0;
            padding: 0;
        }
        
        .invoice-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 0.5in;
            border-bottom: 3px solid #2c5aa0;
            padding-bottom: 0.3in;
        }
        
        .invoice-title {
            font-size: 24pt;
            font-weight: bold;
            color: #2c5aa0;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .invoice-number {
            text-align: right;
            font-size: 12pt;
        }
        
        .invoice-number .label {
            font-weight: bold;
            color: #666;
        }
        
        .invoice-number .number {
            font-size: 16pt;
            font-weight: bold;
            color: #2c5aa0;
        }
        
        .invoice-date {
            font-size: 10pt;
            color: #666;
            margin-top: 0.1in;
        }
        
        .contacts-section {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.75in;
        }
        
        .from-contact, .to-contact {
            width: 45%;
        }
        
        .contact-header {
            font-size: 12pt;
            font-weight: bold;
            color: #2c5aa0;
            margin-bottom: 0.15in;
            text-transform: uppercase;
            border-bottom: 1px solid #ddd;
            padding-bottom: 0.05in;
        }
        
        .contact-name {
            font-weight: bold;
            font-size: 11pt;
            margin-bottom: 0.05in;
        }
        
        .contact-title {
            font-style: italic;
            font-size: 9pt;
            color: #666;
            margin-bottom: 0.1in;
        }
        
        .contact-company {
            font-weight: bold;
            font-size: 10pt;
            margin-bottom: 0.05in;
        }
        
        .contact-details {
            font-size: 9pt;
            line-height: 1.4;
            color: #555;
        }
        
        .items-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 0.5in;
            font-size: 9pt;
        }
        
        .items-table th {
            background-color: #2c5aa0;
            color: white;
            font-weight: bold;
            padding: 0.15in 0.1in;
            text-align: left;
            font-size: 9pt;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .items-table th.date-col { width: 12%; }
        .items-table th.desc-col { width: 40%; }
        .items-table th.time-col { width: 12%; }
        .items-table th.hours-col { width: 10%; }
        .items-table th.rate-col { width: 12%; }
        .items-table th.total-col { width: 14%; text-align: right; }
        
        .items-table td {
            padding: 0.12in 0.1in;
            border-bottom: 1px solid #eee;
            vertical-align: top;
            word-wrap: break-word;
        }
        
        .items-table tr:nth-child(even) td {
            background-color: #f8f9fa;
        }
        
        .items-table tr:nth-child(odd) td {
            background-color: #ffffff;
        }
        
        .items-table td.date {
            font-weight: bold;
            color: #2c5aa0;
            white-space: nowrap;
        }
        
        .items-table td.description {
            line-height: 1.4;
            word-break: break-word;
        }
        
        .items-table td.time {
            font-size: 8pt;
            white-space: nowrap;
        }
        
        .items-table td.hours {
            text-align: center;
            font-weight: bold;
        }
        
        .items-table td.rate {
            text-align: right;
            font-weight: bold;
        }
        
        .items-table td.total {
            text-align: right;
            font-weight: bold;
            color: #2c5aa0;
        }
        
        .fixed-amount-row td.description {
            font-style: italic;
        }
        
        .total-section {
            margin-top: 0.5in;
            text-align: right;
        }
        
        .total-row {
            margin-bottom: 0.1in;
            font-size: 12pt;
        }
        
        .total-label {
            display: inline-block;
            width: 2in;
            font-weight: bold;
            color: #666;
            text-align: right;
            margin-right: 0.2in;
        }
        
        .total-amount {
            display: inline-block;
            width: 1.5in;
            text-align: right;
            font-weight: bold;
            font-size: 14pt;
            color: #2c5aa0;
            border-top: 2px solid #2c5aa0;
            padding-top: 0.1in;
        }
        
        .footer {
            margin-top: 1in;
            text-align: center;
            font-size: 8pt;
            color: #999;
            border-top: 1px solid #ddd;
            padding-top: 0.3in;
        }
        
        /* Responsive adjustments for better line breaking */
        @media print {
            .items-table td.description {
                max-width: 3in;
                word-wrap: break-word;
                hyphens: auto;
            }
        }
    </style>
</head>
<body>
    <div class="invoice-header">
        <div class="invoice-title">Invoice</div>
        <div class="invoice-number">
            <div><span class="label">Invoice #</span></div>
            <div class="number">{{invoice_details.invoice_number}}</div>
            <div class="invoice-date">Date: {{formatDate invoice_details.invoice_date}}</div>
        </div>
    </div>
    
    <div class="contacts-section">
        <div class="from-contact">
            <div class="contact-header">From</div>
            <div class="contact-name">{{invoice_details.from_contact.name}}</div>
            {{#if invoice_details.from_contact.title}}
            <div class="contact-title">{{invoice_details.from_contact.title}}</div>
            {{/if}}
            <div class="contact-details">
                {{invoice_details.from_contact.address}}<br>
                {{invoice_details.from_contact.phone}}<br>
                {{invoice_details.from_contact.email}}
            </div>
        </div>
        
        <div class="to-contact">
            <div class="contact-header">Bill To</div>
            <div class="contact-name">{{invoice_details.to_contact.name}}</div>
            {{#if invoice_details.to_contact.company}}
            <div class="contact-company">{{invoice_details.to_contact.company}}</div>
            {{/if}}
            <div class="contact-details">
                {{invoice_details.to_contact.address}}<br>
                {{invoice_details.to_contact.phone}}<br>
                {{invoice_details.to_contact.email}}
            </div>
        </div>
    </div>
    
    <table class="items-table">
        <thead>
            <tr>
                <th class="date-col">Date</th>
                <th class="desc-col">Description</th>
                <th class="time-col">Time</th>
                <th class="hours-col">Hours</th>
                <th class="rate-col">Rate</th>
                <th class="total-col">Total</th>
            </tr>
        </thead>
        <tbody>
            {{#each invoice_items}}
            <tr {{#unless (isTimeBased this)}}class="fixed-amount-row"{{/unless}}>
                <td class="date">{{formatDate this.date}}</td>
                <td class="description">{{this.description}}</td>
                <td class="time">
                    {{#if this.start_time}}
                    {{this.start_time}} - {{this.stop_time}}
                    {{/if}}
                </td>
                <td class="hours">
                    {{#if this.hours}}
                    {{this.hours}}
                    {{/if}}
                </td>
                <td class="rate">
                    {{#if this.hourly_rate}}
                    {{currency this.hourly_rate}}
                    {{/if}}
                </td>
                <td class="total">
                    {{#if (isTimeBased this)}}
                    {{lineTotal this.hours this.hourly_rate}}
                    {{else}}
                    {{currency this.amount}}
                    {{/if}}
                </td>
            </tr>
            {{/each}}
        </tbody>
    </table>
    
    <div class="total-section">
        <div class="total-row">
            <span class="total-label">Total Amount:</span>
            <span class="total-amount">{{calculateTotal invoice_items}}</span>
        </div>
    </div>
    
    <div class="footer">
        Thank you for your business! Payment terms: Net 30 days.
    </div>
</body>
</html>
